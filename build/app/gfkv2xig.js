/*! Built with http://stenciljs.com */

App.loadStyles("page-home","#heapmap{transform-origin:top;transform:scaleY(50)}\npage-home.hydrated{visibility:inherit}");
App.loadComponents("gfkv2xig",function(t,e,a,n){"use strict";function o(t,a,n,o){return e("my-heatmap",{title:a,width:n,data:o,onClick:function(e){const a=e.target.closest("my-heatmap").title;t.openDetailPage(a)}})}function i(t,e,a){return s(r(t,a),e)}function r(t,e){return e=e.toLowerCase(),t.filter(t=>t.text.toLowerCase().includes(e))}function s(t,e){const a=[];for(let o of t){const t=Math.log10(o.min),i=t*e,r=(Math.log10(o.max)-t)*e/4;for(var n=0;n<r;n++)a.push([i+4*n,1,1])}return a}var h=function(t,e,a,n){var o,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,a,r):o(e,a))||r);return i>3&&r&&Object.defineProperty(e,a,r),r},l=function(t,e,a,n){return new(a||(a=Promise))(function(o,i){function r(t){try{h(n.next(t))}catch(t){i(t)}}function s(t){try{h(n.throw(t))}catch(t){i(t)}}function h(t){t.done?o(t.value):new a(function(e){e(t.value)}).then(r,s)}h((n=n.apply(t,e||[])).next())})};class c{constructor(){this.maps=[],this.count=0}onInput(t){if(this.data){const e=t.target.value;this.scheduleSearch(e)}}onInputEnter(){this.addHeapMap()}componentDidLoad(){return l(this,void 0,void 0,function*(){const t=yield fetch("assets/data/data.json");this.data=yield t.json(),this.maxValue=Math.log10(this.data[this.data.length-1].max),this.width=this.el.offsetWidth,this.addHeapMap()})}getText(){return this.el.querySelector("input").value}addHeapMap(){const t=this.getHeapMap();t&&(t.title=this.getText()),this.maps.push({data:this.search(this.getText()),width:this.width}),this.update()}scheduleSearch(t){clearInterval(this.tr),this.tr=setTimeout(()=>this.setData(this.search(t)),100)}getHeapMap(){return this.maps[this.maps.length-1]}setData(t){this.getHeapMap().data=t,this.update()}search(t){return i(this.data,this.width/this.maxValue,t)}openDetailPage(t){t&&this.modalCtrl.create({component:"page-details",componentProps:{title:t,data:this.data}}).then(t=>t.present())}update(){this.count=this.count+1}render(){const t=this.maps;return[e("ion-header",null,e("ion-toolbar",{color:"dark"},e("ion-title",null,"Busqueda por nombre"))),e("ion-content",null,e("ion-searchbar",null),e("div",null,t.map(t=>o(this,t.title,t.width,t.data)).reverse()))]}}h([],c.prototype,"count",void 0),h([],c.prototype,"el",void 0),h([],c.prototype,"modalCtrl",void 0),h([],c.prototype,"onInput",null),h([],c.prototype,"onInputEnter",null),c=h([],c),t["page-home"]=c},["page-home",[["count",5,0,1],["el",7,0,1],["modalCtrl",4,0,1,"ion-modal-controller"]],{}]);;