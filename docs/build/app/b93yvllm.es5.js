/*! Built with http://stenciljs.com */
var __awaiter=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))(function(i,r){function o(t){try{h(n.next(t))}catch(t){r(t)}}function s(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){t.done?i(t.value):new a(function(e){e(t.value)}).then(o,s)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){var a,n,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};App.loadBundle("b93yvllm",["exports","./chunk-7e0de9ac.js","./chunk-085f7403.js"],function(t,e,a){var n,i=window.App.h,r=(function(t){function e(t){if(!(this instanceof e))return new e(t);this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,this._data=[]}t.exports=e,e.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=void 0===e?15:e;var a=this._circle=this._createCanvas(),n=a.getContext("2d"),i=this._r=t+e;return a.width=a.height=2*i,n.shadowOffsetX=n.shadowOffsetY=2*i,n.shadowBlur=e,n.shadowColor="black",n.beginPath(),n.arc(-i,-i,t,0,2*Math.PI,!0),n.closePath(),n.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(t){var e=this._createCanvas(),a=e.getContext("2d"),n=a.createLinearGradient(0,0,0,256);for(var i in e.width=1,e.height=256,t)n.addColorStop(+i,t[i]);return a.fillStyle=n,a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var a,n=0,i=this._data.length;n<i;n++)a=this._data[n],e.globalAlpha=Math.max(a[2]/this._max,void 0===t?.05:t),e.drawImage(this._circle,a[0]-this._r,a[1]-this._r);var r=e.getImageData(0,0,this._width,this._height);return this._colorize(r.data,this._grad),e.putImageData(r,0,0),this},_colorize:function(t,e){for(var a,n=0,i=t.length;n<i;n+=4)(a=4*t[n+3])&&(t[n]=e[a],t[n+1]=e[a+1],t[n+2]=e[a+2])},_createCanvas:function(){return"undefined"!=typeof document?document.createElement("canvas"):new this._canvas.constructor}}}(n={exports:{}}),n.exports),o=function(){function t(){this.legends=[],this.min=1,this.max=275e6,this.heatMax=40,this.heatSize=4,this.heatBlur=0,this.height=100,this.width=300;for(var t=Math.log10(this.min),a=(Math.log10(this.max)-t)/10,n=t,i=0;i<10;i++){var r=Math.pow(10,n);this.legends.push(e.format(r)),n+=a}}return t.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t=this.el.querySelector("canvas"),this.heat=r(t),this.updateHeap(),[2]})})},t.prototype.updateHeap=function(){this.heat&&this.data&&(this.heat.clear(),this.heat.data(this.data),this.heat.max(40),this.heat.radius(8,4),this.heat.draw())},t.prototype.render=function(){var t=this;requestAnimationFrame(function(){t.updateHeap()});var e=[];return this.label&&this.label.length>0&&e.push(i("h3",null,this.label)),e.push(i("div",{style:{width:this.width+"px",height:this.height+"px"}},i("canvas",{width:this.width,style:{transform:"scaleY("+this.height/2+")"},height:2}))),e.push(i("div",{class:"legend"},this.legends.map(function(t){return i("div",null,t)}))),e},Object.defineProperty(t,"is",{get:function(){return"my-heatmap"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{data:{type:"Any",attr:"data"},el:{elementRef:!0},heatBlur:{type:Number,attr:"heat-blur"},heatMax:{type:Number,attr:"heat-max"},heatSize:{type:Number,attr:"heat-size"},height:{type:Number,attr:"height"},label:{type:String,attr:"label"},max:{type:Number,attr:"max"},min:{type:Number,attr:"min"},width:{type:Number,attr:"width"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"my-heatmap{margin-bottom:2rem 0;display:block;border-bottom:3px solid #e4e4e4;background:#fff}my-heatmap canvas{display:block;-webkit-transform-origin:top;transform-origin:top}my-heatmap h3{font-size:2.2rem;font-weight:400;margin-left:2rem}my-heatmap>.legend{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:1rem;color:#9a9a9a;font-weight:600}my-heatmap>.legend>div{white-space:nowrap}"},enumerable:!0,configurable:!0}),t}(),s=function(){function t(){this.maps=[],this.count=0}return t.prototype.onInput=function(t){if(this.data){var e=t.target.value;this.scheduleSearch(e)}},t.prototype.onInputEnter=function(){this.addHeapMap()},t.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(a){switch(a.label){case 0:return[4,fetch("assets/data/data.json")];case 1:return t=a.sent(),e=this,[4,t.json()];case 2:return e.data=a.sent(),this.maxValue=Math.log10(this.data[this.data.length-1].max),this.width=this.el.offsetWidth,this.addHeapMap(),[2]}})})},t.prototype.getText=function(){return this.el.querySelector("input").value},t.prototype.addHeapMap=function(){var t=this.getHeapMap();t&&(t.label=this.getText()),this.maps.push({data:this.search(this.getText()),width:this.width}),this.update()},t.prototype.scheduleSearch=function(t){var e=this;clearInterval(this.tr),this.tr=setTimeout(function(){return e.setData(e.search(t))},100)},t.prototype.getHeapMap=function(){return this.maps[this.maps.length-1]},t.prototype.setData=function(t){this.getHeapMap().data=t,this.update()},t.prototype.search=function(t){return e.searchDataPoints(this.data,this.width/this.maxValue,t)},t.prototype.openDetailPage=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return t?[4,this.modalCtrl.create({component:"page-details",componentProps:{label:t,data:this.data}})]:[3,3];case 1:return[4,e.sent().present()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.update=function(){this.count=this.count+1},t.prototype.render=function(){var t=this,e=this.maps;return[i("ion-header",null,i("ion-toolbar",{color:"dark"},i("ion-buttons",{slot:"start"},i("ion-menu-button",null)),i("ion-title",null,"Busqueda por nombre"))),i("ion-content",null,i("ion-searchbar",null),i("div",null,e.map(function(e){return a=t,n=e.label,r=e.width,o=e.data,i("my-heatmap",{label:n,width:r,data:o,onClick:function(t){var e=t.target.closest("my-heatmap").label;a.openDetailPage(e)}});var a,n,r,o}).reverse()))]},Object.defineProperty(t,"is",{get:function(){return"page-home"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{count:{state:!0},el:{elementRef:!0},modalCtrl:{connect:"ion-modal-controller"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"input",method:"onInput"},{name:"keydown.enter",method:"onInputEnter"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"#heapmap{-webkit-transform-origin:top;transform-origin:top;-webkit-transform:scaleY(50);transform:scaleY(50)}"},enumerable:!0,configurable:!0}),t}(),h=function(){function t(){this.modals=new Map}return t.prototype.modalWillPresent=function(t){this.modals.set(t.target.overlayId,t.target)},t.prototype.modalWillDismiss=function(t){this.modals.delete(t.target.overlayId)},t.prototype.escapeKeyUp=function(){a.removeLastOverlay(this.modals)},t.prototype.create=function(t){return a.createOverlay(this.doc.createElement("ion-modal"),t)},t.prototype.dismiss=function(t,e,n){return void 0===n&&(n=-1),a.dismissOverlay(t,e,this.modals,n)},t.prototype.getTop=function(){return a.getTopOverlay(this.modals)},Object.defineProperty(t,"is",{get:function(){return"ion-modal-controller"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{create:{method:!0},dismiss:{method:!0},doc:{context:"document"},getTop:{method:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"body:ionModalWillPresent",method:"modalWillPresent"},{name:"body:ionModalWillDismiss",method:"modalWillDismiss"},{name:"body:ionModalDidUnload",method:"modalWillDismiss"},{name:"body:keyup.escape",method:"escapeKeyUp"}]},enumerable:!0,configurable:!0}),t}();t.MyHeatmap=o,t.PageHome=s,t.IonModalController=h,Object.defineProperty(t,"__esModule",{value:!0})});